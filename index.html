<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>US County Map</title>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script src="https://unpkg.com/topojson-client@3"></script>
    <style>
        svg { width: 1000px; height: 600px; border: 1px solid black; }
        .county { fill: lightgray; stroke: white; stroke-width: 0.5px; }
        .county:hover { fill: orange; }
    </style>
</head>
<body>
    <h2>US County Map</h2>
    <svg></svg>
    <script>
        const width = 1000, height = 600;
        const svg = d3.select("svg").attr("width", width).attr("height", height);
        const projection = d3.geoAlbersUsa().translate([width / 2, height / 2]).scale(1200);
        const path = d3.geoPath().projection(projection);

        d3.json("us_county_map.json").then(data => {
            console.log("Loaded TopoJSON:", data);

            // Convert TopoJSON to GeoJSON
            const counties = topojson.feature(data, data.objects.counties);

            svg.selectAll(".county")
                .data(counties.features)
                .enter().append("path")
                .attr("class", "county")
                .attr("d", path)
                .append("title")
                .text(d => `${d.properties.name}, ${d.properties.state}`);
        }).catch(error => console.error("Error loading JSON:", error));
    </script>
</body>
</html>
