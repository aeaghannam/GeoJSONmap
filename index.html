<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>US County Map</title>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <style>
        svg { width: 100%; height: 600px; border: 1px solid black; }
        .county { fill: lightgray; stroke: white; stroke-width: 0.5px; }
        .county:hover { fill: orange; }
    </style>
</head>
<body>
    <h2>US County Map</h2>
    <svg></svg>
    <script>
d3.json("us_county_map.json").then(data => {
    console.log("Loaded TopoJSON:", data);

    // Convert TopoJSON to GeoJSON
    const counties = topojson.feature(data, data.objects.counties);

    const svg = d3.select("svg")
        .attr("width", 1000)
        .attr("height", 600);

    const projection = d3.geoAlbersUsa()
        .translate([500, 300])
        .scale(1200);

    const path = d3.geoPath().projection(projection);

    svg.selectAll(".county")
        .data(counties.features)
        .enter().append("path")
        .attr("class", "county")
        .attr("d", path)
        .attr("fill", "lightgray")
        .attr("stroke", "white")
        .attr("stroke-width", 0.5)
        .on("mouseover", function () { d3.select(this).attr("fill", "orange"); })
        .on("mouseout", function () { d3.select(this).attr("fill", "lightgray"); })
        .append("title")
        .text(d => `${d.properties.name}, ${d.properties.state}`);
}).catch(error => console.error("Error loading JSON:", error));

    </script>
</body>
</html>
